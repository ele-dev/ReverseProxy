# copy the cloudflare credentials inside the image (command for dockerfile)
COPY ./cloudflare.ini /opt/cloudflare.ini

# build image (execute on shell inside the folder with the dockerfile)
docker build -t ssl-terminator .

# start temp container to obtain the wildcard cert and place it inside the shared volume
docker run --rm -it -v reverseproxy_certs:/etc/letsencrypt ssl-terminator certonly --dns-cloudflare --dns-cloudflare-credentials /opt/cloudflare.ini \
-d "*.ele-net.de" -d ele-net.de 

# view the certificate in the volume
docker run --rm -it -v reverseproxy_certs:/etc/letsencrypt ssl-terminator certificates

# command for renewing all certificates that are about to expire (less than 30 days left)
docker run --rm -it -v reverseproxy_certs:/etc/letsencrypt ssl-terminator renew --noninteractive
